<div class="auth-page">
  <div class="auth-container">
    <div class="brand">
      <div class="logo">
        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="48" height="48" rx="12" fill="url(#gradient)"/>
          <path d="M24 12L32 18V30L24 36L16 30V18L24 12Z" fill="white" opacity="0.9"/>
          <path d="M24 20V28M20 24H28" stroke="#4F46E5" stroke-width="2.5" stroke-linecap="round"/>
          <defs>
            <linearGradient id="gradient" x1="0" y1="0" x2="48" y2="48" gradientUnits="userSpaceOnUse">
              <stop stop-color="#4F46E5"/>
              <stop offset="1" stop-color="#7C3AED"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h2>Iniciar sesión</h2>
        <p>Ingresa tus credenciales para acceder</p>
      </div>

      <form class="form" (ngSubmit)="onSubmit()">
        <div class="field-group">
          <label class="field-label">
            <svg class="field-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 10C12.21 10 14 8.21 14 6C14 3.79 12.21 2 10 2C7.79 2 6 3.79 6 6C6 8.21 7.79 10 10 10ZM10 12C7.33 12 2 13.34 2 16V18H18V16C18 13.34 12.67 12 10 12Z" fill="#9CA3AF"/>
            </svg>
            <span>Usuario</span>
          </label>
          <input
            class="field-input"
            name="username"
            type="text"
            autocomplete="username"
            placeholder="Nombre de usuario"
            [ngModel]="ctrl.username()"
            (ngModelChange)="ctrl.username.set($event)"
            required
          />
        </div>

        <div class="field-group">
          <label class="field-label">
            <svg class="field-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M15 7H14V5C14 2.79 12.21 1 10 1C7.79 1 6 2.79 6 5V7H5C3.9 7 3 7.9 3 9V17C3 18.1 3.9 19 5 19H15C16.1 19 17 18.1 17 17V9C17 7.9 16.1 7 15 7ZM10 14C8.9 14 8 13.1 8 12C8 10.9 8.9 10 10 10C11.1 10 12 10.9 12 12C12 13.1 11.1 14 10 14ZM11.1 7H8.9V5C8.9 4.39 9.39 3.9 10 3.9C10.61 3.9 11.1 4.39 11.1 5V7Z" fill="#9CA3AF"/>
            </svg>
            <span>Contraseña</span>
          </label>
          <div class="input-with-toggle">
            <input
              class="field-input"
              name="password"
              [type]="showPassword ? 'text' : 'password'"
              autocomplete="current-password"
              placeholder="Ingresa tu contraseña"
              [ngModel]="ctrl.password()"
              (ngModelChange)="ctrl.password.set($event)"
              required
            />
            <button 
              type="button" 
              class="toggle-password" 
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
            >
              <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M12 5C8.24 5 5.06 7.23 3.5 10.5C5.06 13.77 8.24 16 12 16C15.76 16 18.94 13.77 20.5 10.5C18.94 7.23 15.76 5 12 5ZM12 14C10.34 14 9 12.66 9 11C9 9.34 10.34 8 12 8C13.66 8 15 9.34 15 11C15 12.66 13.66 14 12 14Z" fill="#6B7280"/>
                <circle cx="12" cy="11" r="2" fill="#6B7280"/>
              </svg>
              <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M12 7C14.76 7 17.94 9.23 19.5 12.5C18.37 14.71 16.14 16.5 13.5 17.24M9 14.12C8.4 13.5 8 12.78 8 12C8 10.34 9.34 9 11 9C11.78 9 12.5 9.4 13.12 10M3 3L21 21M12 5C8.24 5 5.06 7.23 3.5 10.5C4.5 12.26 6 13.71 7.8 14.6" stroke="#6B7280" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>

        <button class="btn-submit" type="submit" [disabled]="ctrl.loading()">
          <span *ngIf="!ctrl.loading()">Acceder al sistema</span>
          <span *ngIf="ctrl.loading()" class="loading">
            <svg class="spinner" width="20" height="20" viewBox="0 0 20 20">
              <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none" opacity="0.25"/>
              <path d="M10 2C5.58 2 2 5.58 2 10" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
            Autenticando...
          </span>
        </button>

        <div class="alert-error" *ngIf="ctrl.error()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z" fill="#EF4444"/>
            <path d="M10 6V11M10 14H10.01" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <div>
            <strong>Error de autenticación</strong>
            <p>{{ ctrl.error() }}</p>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
